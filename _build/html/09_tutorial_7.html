<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="prev" title="Tutorial 6 - Create Calculator App" href="08_tutorial_6.html" />

    <link rel="shortcut icon" href="_static/logo.ico"/><!-- Generated with Sphinx 4.5.0 and Furo 2022.12.07 -->
        <title>Tutorial 7 - Refine Calculator App - PyQt Tutorials</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: gill sans, sans-serif;
  --font-stack--monospace: monaco, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">PyQt Tutorials</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">PyQt Tutorials</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_tutorial_1.html">Tutorial 1 - Creating Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_tutorial_2.html">Tutorial 2 - Labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_tutorial_3.html">Tutorial 3 - Layouts</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_tutorial_4.html">Tutorial 4 - Complex UIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_tutorial_5.html">Tutorial 5 - Signals and Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_tutorial_6.html">Tutorial 6 - Create Calculator App</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Tutorial 7 - Refine Calculator App</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="tutorial-7-refine-calculator-app">
<h1>Tutorial 7 - Refine Calculator App<a class="headerlink" href="#tutorial-7-refine-calculator-app" title="Permalink to this headline">#</a></h1>
<div class="admonition-in-this-tutorial-you-will admonition">
<p class="admonition-title">In this tutorial you will:</p>
<ul class="simple">
<li><p>make the calculator app perform calculations</p></li>
</ul>
</div>
<p>In the previous tutorial we created a calculator UI. Now it is time to make it work.</p>
<section id="equals-button">
<h2>Equals button<a class="headerlink" href="#equals-button" title="Permalink to this headline">#</a></h2>
<p>We mention in the previous tutorial that we will use Python’s <strong>eval()</strong> function to calculate the value of the string equation that our calculator has created. We also did not assign a signal and slot to the equal button. Well it is time address both of these.</p>
<section id="equals-signals-and-slots">
<h3>Equals signals and slots<a class="headerlink" href="#equals-signals-and-slots" title="Permalink to this headline">#</a></h3>
<p>Just like all the other buttons, first we will create the equals_clicked slot.</p>
<ol class="simple">
<li><p>Go to the bottom of your slots section</p></li>
<li><p>Add the code on <strong>line 105</strong> and <strong>line 106</strong> below.</p></li>
</ol>
<p><img alt="equals clicked slot" src="_images/01_equals_clicked.png" /></p>
<p>Now we need to add the signal.</p>
<ol class="simple">
<li><p>Go to the bottom of the <strong>signals</strong> method.</p></li>
<li><p>Add the code on <strong>line 40</strong>.</p></li>
</ol>
<p><img alt="equals signal" src="_images/02_equals_signal.png" /></p>
<p>Finally complete the equals slot.</p>
<ol class="simple">
<li><p>Return to the <strong>equals_clicked</strong> slot</p></li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">pass</span></code> with the code from <strong>lines 107 to 109</strong> below.</p></li>
</ol>
<p><img alt="equals slot finished" src="_images/03_equals_slot_complete.png" /></p>
</section>
<section id="testing-equals">
<h3>Testing Equals<a class="headerlink" href="#testing-equals" title="Permalink to this headline">#</a></h3>
<p>Time to run your program and see if it works. At the moment it is very rudimentary, but it will work with simple calculations. So run your calculator and trying a simple equation.</p>
<p>It won’t take you long to see that there are many problems with our simple calculator. The rest of this tutorial is about fixing those problems.</p>
</section>
</section>
<section id="after-clicking-equals">
<h2>After Clicking Equals<a class="headerlink" href="#after-clicking-equals" title="Permalink to this headline">#</a></h2>
<p>After we click the equals button, the calculator returns the result of the calculation. That is good. The problem occurs when we click the next button. It’s value gets added to the calculation result on the screen.</p>
<ul class="simple">
<li><p>If that button is an operator (+, -, / or *) then this is normal operation of a calculator, and that’s ok.</p></li>
<li><p>If that button is a number, then that is not how a calculator works. A normal calculator removes the result and starts a new calculation.</p></li>
</ul>
<p>How are we going to solve this?</p>
<p>The problem is that the calculator needs to know whether the previous button click was the <strong>equals</strong> button, that way it know how to respond to our number clicks. To record if the equals button has been clicked, we will use a flag variable.</p>
<div class="hint admonition">
<p class="admonition-title">Flag Variables</p>
<p>A <strong>flag variable</strong> is a boolean used to indicate when a specific condition has been met in a program. It is typically set to <code class="docutils literal notranslate"><span class="pre">True</span></code> when an event occurs and reset to <code class="docutils literal notranslate"><span class="pre">False</span></code> when the condition is no longer valid. Flag variables are commonly used in loops, decision-making, and event handling to control program flow efficiently.</p>
</div>
<section id="create-flag-variable">
<h3>Create Flag Variable<a class="headerlink" href="#create-flag-variable" title="Permalink to this headline">#</a></h3>
<p>The first step is creating the flag variable, we need to do this in <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.</p>
<ol class="simple">
<li><p>Go to the <strong>initialise variables</strong> section of the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method</p></li>
<li><p>Add the line of code in <strong>line 17 below</strong></p></li>
</ol>
<p><img alt="equals flag" src="_images/04_equals_flag.png" /></p>
<div class="hint admonition">
<p class="admonition-title">Naming Flag Variables</p>
<p>When naming flag variables, it is best to name them as a statement, so their value of <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> makes sense.</p>
</div>
</section>
<section id="set-flag-variable">
<h3>Set Flag Variable<a class="headerlink" href="#set-flag-variable" title="Permalink to this headline">#</a></h3>
<p>Now we need to set the flag variable. We want to set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> when the <strong>equal</strong> button is pressed, but reset it to <code class="docutils literal notranslate"><span class="pre">False</span></code> if any other button is pressed.</p>
<p>First lets focus on setting the flag to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<ol class="simple">
<li><p>Go to the <strong>equals_clicked</strong> slot</p></li>
<li><p>Add the code in <strong>line 108</strong> below</p></li>
</ol>
<p><img alt="equal flag true" src="_images/05_equal_flag_true.png" /></p>
<p>Now to work on when the flag gets set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, which is every other button. Lets start on <strong>button 9</strong>.</p>
<ol class="simple">
<li><p>Go to the <strong>nine_clicked</strong> slot</p></li>
<li><p>Add the code in <strong>line 48</strong> below.</p></li>
</ol>
<p><img alt="equal flag false" src="_images/06_equal_flag_false.png" /></p>
<p>Now <strong>repeat this for all the other buttons</strong>, except the equals button.</p>
</section>
<section id="use-flag-variable">
<h3>Use Flag Variable<a class="headerlink" href="#use-flag-variable" title="Permalink to this headline">#</a></h3>
<p>Now that the flag variable is set for each button, time to use it to influence the behaviour of our calculator app.</p>
<p>What we want to do is for each of the <strong>number buttons and the decimal button</strong>:</p>
<ul class="simple">
<li><p>check if the previous button was equals</p></li>
<li><p>if it was, reset <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> before appending the number to it.</p></li>
</ul>
<p>Again we will start with <strong>button 9</strong></p>
<ol class="simple">
<li><p>Go to the <strong>nine_clicked</strong> slot</p></li>
<li><p>At the top (this is important) of the method add the code in <strong>line 48</strong> and <strong>line 49</strong>.</p></li>
</ol>
<p><img alt="flag being used" src="_images/07_use_flag.png" /></p>
<p>Again repeat this for all the other numbers and the decimal button.</p>
</section>
<section id="testing-flag">
<h3>Testing Flag<a class="headerlink" href="#testing-flag" title="Permalink to this headline">#</a></h3>
<p>Time to test that the flag works. Launch your app and check what happens after you click the equals button.</p>
</section>
</section>
<section id="multiple-operators">
<h2>Multiple Operators<a class="headerlink" href="#multiple-operators" title="Permalink to this headline">#</a></h2>
<p>The next problem that we have is that our calculator allows the user to enter multiple operators. Is this a problem?</p>
<section id="multiple-operators-planning">
<h3>Multiple Operators Planning<a class="headerlink" href="#multiple-operators-planning" title="Permalink to this headline">#</a></h3>
<p>Use your calculator to test the possible combinations of operators. The table below is a summary of the testing.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Operators</p></th>
<th class="text-align:left head"><p>Example</p></th>
<th class="text-align:left head"><p>Result</p></th>
<th class="text-align:left head"><p>Analysis</p></th>
<th class="text-align:left head"><p>Verdict</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">++</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5++2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">7</span></code></p></td>
<td class="text-align:left"><p>This works as the first <code class="docutils literal notranslate"><span class="pre">+</span></code> is the addition operator and the second <code class="docutils literal notranslate"><span class="pre">+</span></code> indicates <code class="docutils literal notranslate"><span class="pre">+2</span></code>. Although it works it is unnecessary since it is the same as using <code class="docutils literal notranslate"><span class="pre">+</span></code>.</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+-</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5+-2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td class="text-align:left"><p>This works as the <code class="docutils literal notranslate"><span class="pre">+</span></code> is the addition operator and the <code class="docutils literal notranslate"><span class="pre">-</span></code> indicates <code class="docutils literal notranslate"><span class="pre">-2</span></code>. Although it could be replaced with just <code class="docutils literal notranslate"><span class="pre">-</span></code> allowing <code class="docutils literal notranslate"><span class="pre">+-</span></code> will make it easier for the user.</p></td>
<td class="text-align:left"><p>Allow</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+*</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5+*2</span></code></p></td>
<td class="text-align:left"><p>Error raised</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+*</span></code> is invalid syntax</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+/</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5+/2</span></code></p></td>
<td class="text-align:left"><p>Error raised</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+/</span></code> is invalid syntax</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-+</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5-+2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td class="text-align:left"><p>This works as the <code class="docutils literal notranslate"><span class="pre">-</span></code> is the subtraction operator and the <code class="docutils literal notranslate"><span class="pre">+</span></code> indicates <code class="docutils literal notranslate"><span class="pre">+2</span></code>. Although it works it is unnecessary since <code class="docutils literal notranslate"><span class="pre">-+</span></code> is the same as using <code class="docutils literal notranslate"><span class="pre">-</span></code>.</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">--</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5--2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">7</span></code></p></td>
<td class="text-align:left"><p>This works as the first <code class="docutils literal notranslate"><span class="pre">-</span></code> is the subtraction operator and the second <code class="docutils literal notranslate"><span class="pre">-</span></code> indicates <code class="docutils literal notranslate"><span class="pre">-2</span></code>. Although it could be replaced with just <code class="docutils literal notranslate"><span class="pre">+</span></code> allowing <code class="docutils literal notranslate"><span class="pre">--</span></code> will make it easier for the user.</p></td>
<td class="text-align:left"><p>Allow</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-*</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5-*2</span></code></p></td>
<td class="text-align:left"><p>Error raised</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-*</span></code> is invalid syntax</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-/</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5-/2</span></code></p></td>
<td class="text-align:left"><p>Error raised</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-/</span></code> is invalid syntax</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">*+</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5*+2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">10</span></code></p></td>
<td class="text-align:left"><p>This works as the <code class="docutils literal notranslate"><span class="pre">*</span></code> is the multiplication operator and the <code class="docutils literal notranslate"><span class="pre">+</span></code> indicates <code class="docutils literal notranslate"><span class="pre">+2</span></code>. Although it works it is unnecessary since <code class="docutils literal notranslate"><span class="pre">*+</span></code> is the same as using <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">*-</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5*-2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-10</span></code></p></td>
<td class="text-align:left"><p>This is correct and required as there is no other way to represent this equation</p></td>
<td class="text-align:left"><p>Allow</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5**2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">25</span></code></p></td>
<td class="text-align:left"><p>This works since <code class="docutils literal notranslate"><span class="pre">**</span></code> is the Python expediential operator. The result provided is <code class="docutils literal notranslate"><span class="pre">5</span></code> to the power of <code class="docutils literal notranslate"><span class="pre">2</span></code>. Our calculator is not performing expediential operations.</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">*/</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5*/2</span></code></p></td>
<td class="text-align:left"><p>Error raised</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">*/</span></code> is invalid syntax</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">/+</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5/+2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">2.5</span></code></p></td>
<td class="text-align:left"><p>This works as the <code class="docutils literal notranslate"><span class="pre">/</span></code> is the division operator and the <code class="docutils literal notranslate"><span class="pre">+</span></code> indicates <code class="docutils literal notranslate"><span class="pre">+2</span></code>. Although it works it is unnecessary since <code class="docutils literal notranslate"><span class="pre">/+</span></code> is the same as using <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">/-</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5/-2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">-2.5</span></code></p></td>
<td class="text-align:left"><p>This is correct and required as there is no other way to represent this equation</p></td>
<td class="text-align:left"><p>Allow</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">/*</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5/*2</span></code></p></td>
<td class="text-align:left"><p>Error raised</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">/*</span></code> is invalid syntax</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">//</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5//2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
<td class="text-align:left"><p>This works since <code class="docutils literal notranslate"><span class="pre">//</span></code> is the Python floor division operator. The result provided is integer component of <code class="docutils literal notranslate"><span class="pre">5/2</span></code>. Our calculator is not performing floor division operations.</p></td>
<td class="text-align:left"><p>Prevent</p></td>
</tr>
</tbody>
</table>
</div>
<div class="hint admonition">
<p class="admonition-title">Systematic Testing</p>
<p>You will notice with the table above, the testing is being systematic. It first tests all the possible combinations of the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator, then the <code class="docutils literal notranslate"><span class="pre">-</span></code> operator etc. Being systematic in your testing makes sure that is tests all possible pathways that your program can take, this improves <strong>test coverage</strong> and helps to ensure the reliablity of your code.</p>
</div>
<p>Looking at the testing table we can determine the behaviour of our calculator when an operation button is clicked. This will be determined by a combination of the last character in the <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> string and which button has been clicked.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Button</p></th>
<th class="text-align:left head"><p>Last Equation Character</p></th>
<th class="text-align:left head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>+</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+</span></code> <code class="docutils literal notranslate"><span class="pre">-</span></code> <code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td class="text-align:left"><p>Do not add <code class="docutils literal notranslate"><span class="pre">+</span></code> to the equation</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>+</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">.</span></code> or any digit</p></td>
<td class="text-align:left"><p>Add <code class="docutils literal notranslate"><span class="pre">+</span></code> to the equation</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>-</p></td>
<td class="text-align:left"><p>Any character</p></td>
<td class="text-align:left"><p>Add <code class="docutils literal notranslate"><span class="pre">-</span></code> to the equation</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>x</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+</span></code> <code class="docutils literal notranslate"><span class="pre">-</span></code> <code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td class="text-align:left"><p>Do not add <code class="docutils literal notranslate"><span class="pre">*</span></code> to the equation</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>x</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">.</span></code> or any digit</p></td>
<td class="text-align:left"><p>Add <code class="docutils literal notranslate"><span class="pre">*</span></code> to the equation</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>/</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">+</span></code> <code class="docutils literal notranslate"><span class="pre">-</span></code> <code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td class="text-align:left"><p>Do not add <code class="docutils literal notranslate"><span class="pre">/</span></code> to the equation</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>/</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">.</span></code> or any digit</p></td>
<td class="text-align:left"><p>Add <code class="docutils literal notranslate"><span class="pre">/</span></code> to the equation</p></td>
</tr>
</tbody>
</table>
</div>
<p>This can be distilled down to three simple rules:</p>
<ul class="simple">
<li><p>for the <strong>-</strong> button → nothing changes</p></li>
<li><p>for the <strong>+</strong> <strong>x</strong> and <strong>/</strong> buttons:</p>
<ul>
<li><p>if the last <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> character is a digit or <code class="docutils literal notranslate"><span class="pre">.</span></code> add the symbol.</p></li>
<li><p>otherwise, do nothing</p></li>
</ul>
</li>
</ul>
</section>
<section id="multiple-operators-code">
<h3>Multiple Operators Code<a class="headerlink" href="#multiple-operators-code" title="Permalink to this headline">#</a></h3>
<p>Lets implement these into code.</p>
<ol class="simple">
<li><p>Go to the <strong>multiplied_clicked</strong> slot</p></li>
<li><p>Add the <strong>line 126</strong> below</p></li>
<li><p>Make sure that you add and indent to <strong>line 127</strong></p></li>
</ol>
<p><img alt="check operator code" src="_images/08_operator_check.png" /></p>
<div class="see also admonition">
<p class="admonition-title">Code explanation</p>
<p>Looking at <strong>line 126</strong> and there are two important tools we are using to manipulate strings — referencing string characters and string methods.</p>
<p><strong>Referencing characters</strong></p>
<p>In Python strings are actually a special type of list, therefore every character is assigned an index. This means that you can <strong><a class="reference external" href="https://www.geeksforgeeks.org/python-string/">refernce characters</a></strong> and <strong><a class="reference external" href="https://www.geeksforgeeks.org/string-slicing-in-python/">slice strings</a></strong> the same way you can refernce elements in a list and slice lists.</p>
<p>The code <code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span></code> is an example of referencing characters via the index. Indexes can run both backwards, so the index -1 always refers to the last character in a string.</p>
<p><strong>String methods</strong></p>
<p><strong><a class="reference external" href="https://www.programiz.com/python-programming/methods/string">String methods</a></strong> are built-in functions that you can use to manipulate and work with strings. These is extremely useful since strings comprise much of the data program deal with.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.isdigit()</span></code> method checks to see if the string consists of only digits (ie. 0-9). In our code the string we are checking is <code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span></code> — the last character of the equation string.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">.</span></code> is not a character, we needed to add <code class="docutils literal notranslate"><span class="pre">or</span> <span class="pre">self.equaltion[-1]</span> <span class="pre">=</span> <span class="pre">&quot;.&quot;</span> <span class="pre">to</span> <span class="pre">allow</span> <span class="pre">operators</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">added</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">string</span> <span class="pre">that</span> <span class="pre">ends</span> <span class="pre">with</span> </code>.`.</p>
</div>
<p>Now repeat the same changes in <strong>divide_clicked</strong> and <strong>add_clicked</strong> slots.</p>
</section>
<section id="test-multiple-operators">
<h3>Test Multiple Operators<a class="headerlink" href="#test-multiple-operators" title="Permalink to this headline">#</a></h3>
<p>Finally you need to test that this has solved the problem. Use the summary table above and make sure that all the combinations our code prevents and allows the correct combination of operators.</p>
</section>
</section>
<section id="operator-first">
<h2>Operator First<a class="headerlink" href="#operator-first" title="Permalink to this headline">#</a></h2>
<p>Launch your calculator and click on the <strong>x</strong> button. It will raise the error below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;d:\GIT\PyQt6-website-tutorials\calculator.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">126</span><span class="p">,</span> <span class="ow">in</span> <span class="n">multipy_clicked</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">equation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">equation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
       <span class="o">~~~~~~~~~~~~~^^^^</span>
<span class="ne">IndexError</span><span class="p">:</span> <span class="n">string</span> <span class="n">index</span> <span class="n">out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
<p>You can see that the Traceback points to the line we just added to our code. In correcting our last problem, we have introduced another. Lets fix that.</p>
<section id="operator-first-planning">
<h3>Operator First Planning<a class="headerlink" href="#operator-first-planning" title="Permalink to this headline">#</a></h3>
<p>First we need to work out why this error occurred. The error is <code class="docutils literal notranslate"><span class="pre">IndexError:</span> <span class="pre">string</span> <span class="pre">index</span> <span class="pre">out</span> <span class="pre">of</span> <span class="pre">range</span></code> which means that our index `self.equation[-1] doesn’t exist. Why is that?</p>
<p>Looking back at the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method and we see that <code class="docutils literal notranslate"><span class="pre">self.equation</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span></code>. This means that when the program starts, the value of <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> is an empty string. We cannot refer to the last character, because there are no characters.</p>
<p>So we also need to include an exception for <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> being <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> the <code class="docutils literal notranslate"><span class="pre">if</span></code> statement.</p>
</section>
<section id="operator-first-code">
<h3>Operator First Code<a class="headerlink" href="#operator-first-code" title="Permalink to this headline">#</a></h3>
<p>To fix the error:</p>
<ol class="simple">
<li><p>Go to <strong>multiply_clicked</strong> slot</p></li>
<li><p>Add the new <code class="docutils literal notranslate"><span class="pre">if</span></code> statement in <strong>line 126</strong> of the code below.</p></li>
<li><p>Make sure you add an indent to <strong>line 127</strong> and <strong>line 128</strong></p></li>
</ol>
<p><img alt="Operator first code" src="_images/09_operator_first.png" /></p>
<div class="admonition-code-explination admonition">
<p class="admonition-title">Code explination</p>
<p>The <code class="docutils literal notranslate"><span class="pre">if</span></code> statement on line 126 guards against the error we introduced with our previous change. If <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> is an empty string, then the program will never test the last character.</p>
</div>
<p>Make the same changes in <strong>divide_clicked</strong> and <strong>add_clicked</strong> slots.</p>
</section>
<section id="test-operator-first">
<h3>Test Operator First<a class="headerlink" href="#test-operator-first" title="Permalink to this headline">#</a></h3>
<p>Launch your calculator and check that clicking the <strong>x</strong> button doesn’t cause an error.</p>
<p>Good news, is no error has been raised. Bad news is that the 0 on our calculator has disappeared.</p>
</section>
</section>
<section id="prevent-blank-display">
<h2>Prevent Blank Display<a class="headerlink" href="#prevent-blank-display" title="Permalink to this headline">#</a></h2>
<p>The reason the 0 disappears is that we run the <code class="docutils literal notranslate"><span class="pre">update_display</span></code> method at the end of every slot. This normally isn’t a problem because <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> has a value in it. But now we have a situation where the user can click a button and the <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> is still <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> when the <code class="docutils literal notranslate"><span class="pre">update_display</span></code> is called.</p>
<p>This is a simple fix:</p>
<ol class="simple">
<li><p>Go to the <code class="docutils literal notranslate"><span class="pre">update_display</span></code> method</p></li>
<li><p>Add the code on <strong>line 159</strong> below</p></li>
<li><p>Make sure you add an indentation to <strong>line 160</strong></p></li>
</ol>
<p><img alt="Prevent blank display code" src="_images/10_no_blanmk_display.png" /></p>
</section>
<section id="double-decimal">
<h2>Double Decimal<a class="headerlink" href="#double-decimal" title="Permalink to this headline">#</a></h2>
<p>The next problem is that when you can click on the decimal button twice in a row, and it will display <code class="docutils literal notranslate"><span class="pre">..</span></code> which a calculator should not do.</p>
<p>So lets look at solving that problem.</p>
<section id="double-decimal-planning">
<h3>Double Decimal Planning<a class="headerlink" href="#double-decimal-planning" title="Permalink to this headline">#</a></h3>
<p>The error occurs because the no number contains two decimal points, but <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> can contain multiple decimal points, as long as each number only has one. We need to prevent a decimal point from being added to a number, if that number already has a decimal point. Therefore we need to identify each number in <code class="docutils literal notranslate"><span class="pre">self.equation</span></code>.</p>
<p>Fortunately there is a simple way to do this. Each number in <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> is separated by an operator. So we can use a flag system, similar to our double equals solution, which will record if there is a decimal point in the current number. Clicking the decimal button will set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> and then clicking an operator will set it to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>equals_clicked</p>
<p>First we need to create the flag variable.</p>
<ol class="simple">
<li><p>Go to the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method</p></li>
<li><p>Move to the <strong>initialise variables</strong> section</p></li>
<li><p>Add the code from <strong>line 18</strong> below.</p></li>
</ol>
<p><img alt="double decimal code" src="_images/11_double_decimal.png" /></p>
<p>We need to change the <strong>decimal_clicked</strong> slot so it sets the <code class="docutils literal notranslate"><span class="pre">self.number_has_decimal</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> when clicked.</p>
<ol class="simple">
<li><p>Go to the <strong>decimal_clicked</strong> slot</p></li>
<li><p>Add <strong>line 123</strong> in the code below</p></li>
</ol>
<p><img alt="double decimal code 2" src="_images/12_double_decimal_2.png" /></p>
<p>Now we need prevent a decimal being added to <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> when <code class="docutils literal notranslate"><span class="pre">self.number_has_decimal</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<ol class="simple">
<li><p>Still in the <strong>decimal_clicked</strong> slot</p></li>
<li><p>Add the code in <strong>line 122</strong> below</p></li>
<li><p>Make sure you increase the indent of <strong>line 123</strong> and <strong>line 124</strong></p></li>
</ol>
<p><img alt="double decimal code 3" src="_images/13_double_decimal_3.png" /></p>
<p>Finally we need to adjust the operators slots to make flag <code class="docutils literal notranslate"><span class="pre">False</span></code> when they are clicked.</p>
<ol class="simple">
<li><p>Go to the <strong>multipy_clicked</strong> slot</p></li>
<li><p>Add the code in <strong>line 132</strong></p></li>
</ol>
<p><img alt="double decimal code 4" src="_images/14_double_decimal_4.png" /></p>
<p>Note that the code needs to go after the code that changes <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> and at the same indentation level.</p>
<p>Add the same code to the:</p>
<ul class="simple">
<li><p><strong>divide_clicked</strong> slot</p></li>
<li><p><strong>add_clicked</strong> slot</p></li>
<li><p><strong>subtract_clicked</strong> slot</p></li>
<li><p><strong>equals_clicked</strong> slot</p></li>
</ul>
</section>
<section id="double-decimal-testing">
<h3>Double Decimal Testing<a class="headerlink" href="#double-decimal-testing" title="Permalink to this headline">#</a></h3>
<p>Launch your calculator and test that the decimal button behaves the way you want it to.</p>
</section>
</section>
<section id="leading-zeroes">
<h2>Leading Zeroes<a class="headerlink" href="#leading-zeroes" title="Permalink to this headline">#</a></h2>
<p>In our calculator zero works like any other number, but it shouldn’t. We can create numbers that have leading zeroes. We need to stop this from happening.</p>
<section id="leading-zeroes-planning">
<h3>Leading Zeroes Planning<a class="headerlink" href="#leading-zeroes-planning" title="Permalink to this headline">#</a></h3>
<p>Lets look at when we want prevent <code class="docutils literal notranslate"><span class="pre">0</span></code> from being added to <code class="docutils literal notranslate"><span class="pre">self.equation</span></code>.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Possible equation</p></th>
<th class="text-align:left head"><p>Valid</p></th>
<th class="text-align:left head"><p>When detect</p></th>
<th class="text-align:left head"><p>How to detect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>09</p></td>
<td class="text-align:left"><p>No</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">0</span></code> clicked</p></td>
<td class="text-align:left"><p>self.equation = “”</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>909</p></td>
<td class="text-align:left"><p>Yes</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">0</span></code> clicked</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span></code> is digit</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>+0</p></td>
<td class="text-align:left"><p>Yes</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">0</span></code> clicked</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span></code> is operator</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>+09</p></td>
<td class="text-align:left"><p>No</p></td>
<td class="text-align:left"><p>digit clicked</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code> and <br><code class="docutils literal notranslate"><span class="pre">self.equation[-2]</span></code> is operator</p></td>
</tr>
</tbody>
</table>
</div>
<p>From this table we can create two simple rules:</p>
<ul class="simple">
<li><p>When the zero button is clicked:</p>
<ul>
<li><p>if <code class="docutils literal notranslate"><span class="pre">self.equation</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span></code> don’t add <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
</ul>
</li>
<li><p>When a digit button is clicked:</p>
<ul>
<li><p>if <code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span> <span class="pre">=</span> <span class="pre">0</span> <span class="pre">and</span> <span class="pre">self.equation[-2]</span> <span class="pre">in</span> <span class="pre">[&quot;+&quot;,</span> <span class="pre">&quot;-&quot;,</span> <span class="pre">&quot;*&quot;</span> <span class="pre">&quot;/&quot;]</span></code> remove the <code class="docutils literal notranslate"><span class="pre">0</span></code> at <code class="docutils literal notranslate"><span class="pre">self.equation[-1]</span></code>.</p></li>
</ul>
</li>
</ul>
<p>Ok let’s put that into code:</p>
</section>
<section id="leading-zeroes-code">
<h3>Leading Zeroes Code<a class="headerlink" href="#leading-zeroes-code" title="Permalink to this headline">#</a></h3>
<p>Lets deal with the first rule</p>
<ol class="simple">
<li><p>Go to the <strong>zero_clicked</strong> slot</p></li>
<li><p>Add the code in <strong>line 115</strong></p></li>
<li><p>Increase the indent for <strong>line 116</strong></p></li>
</ol>
<p><img alt="leading zero code 1" src="_images/15_leadin_zero_code_1.png" /></p>
<p>Now the second rule</p>
<ol class="simple">
<li><p>Go to the <strong>nine_clicked</strong> slot</p></li>
<li><p>Add the code in <strong>lines 52 to 54</strong> below make sure you match the indentation.</p></li>
</ol>
<p><img alt="leading zero code 2" src="_images/16_leading_zeros_code_2.png" /></p>
<div class="see also admonition">
<p class="admonition-title">Code explanation</p>
<p><code class="docutils literal notranslate"><span class="pre">self.equation</span> <span class="pre">=</span> <span class="pre">self.equation[:-1]</span></code> uses string slicing to remove the last character in the <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> string</p>
</div>
</section>
<section id="leading-zeroes-testing">
<h3>Leading Zeroes Testing<a class="headerlink" href="#leading-zeroes-testing" title="Permalink to this headline">#</a></h3>
<p>Launch your calculator and check that the zero button behaves as you intended.</p>
</section>
</section>
<section id="divide-by-zero">
<h2>Divide by Zero<a class="headerlink" href="#divide-by-zero" title="Permalink to this headline">#</a></h2>
<p>On other calculators, dividing by zero presents a error message. In our calculator it crashes the program. We need to change that.</p>
<section id="divide-by-zero-planning">
<h3>Divide by Zero Planning<a class="headerlink" href="#divide-by-zero-planning" title="Permalink to this headline">#</a></h3>
<p>Since dividing by zero is mathematically impossible, Python will raise a <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError:</span> <span class="pre">division</span> <span class="pre">by</span> <span class="pre">zero</span></code> error. We can use this to identify when this problem occurs then deal with it using Python’s <code class="docutils literal notranslate"><span class="pre">try-except</span></code> block.</p>
<div class="hint admonition">
<p class="admonition-title">Flag Variables</p>
<p>In Python, a <code class="docutils literal notranslate"><span class="pre">try-except</span></code> block is used to handle errors (exceptions) and prevent a program from crashing. The <code class="docutils literal notranslate"><span class="pre">try</span></code> block contains the code that might raise an exception, and the <code class="docutils literal notranslate"><span class="pre">except</span></code> block catches and handles the error if it occurs. This allows the program to continue running instead of terminating unexpectedly.</p>
<p><strong><a class="reference external" href="https://www.w3schools.com/python/python_try_except.asp">Try Except tutorials</a></strong></p>
</div>
<p>We can use try-except when evaluate <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> to catch and deal with any <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> exceptions.</p>
</section>
<section id="divide-by-zero-code">
<h3>Divide by Zero Code<a class="headerlink" href="#divide-by-zero-code" title="Permalink to this headline">#</a></h3>
<p>So let’s put that plan to code.</p>
<p>Let capture the <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> exception and change <code class="docutils literal notranslate"><span class="pre">result</span></code> so the calculator displays a message when the screen is updated</p>
<ol class="simple">
<li><p>Go to the <strong>equals_clicked</strong> slot</p></li>
<li><p>Replace the current <strong>line 163</strong> with the code from <strong>lines 163 to 166</strong></p></li>
</ol>
<p><img alt="divide by zero code 1" src="_images/17_divide_by_zero.png" /></p>
<p>This now presents a problem, that <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> is now words. Our calculator is not designed to deal with that, so we need to return <code class="docutils literal notranslate"><span class="pre">self.equation</span></code> to a useable value after updating the screen.</p>
<ol class="simple">
<li><p>At the bottom of the <strong>equals_clicked</strong> slot</p></li>
<li><p>Add the code from <strong>lines 170 and 171</strong> below.</p></li>
</ol>
<p><img alt="divide by zero code 2" src="_images/18_divide_by_zero_2.png" /></p>
</section>
<section id="divide-by-zero-testing">
<h3>Divide by Zero Testing<a class="headerlink" href="#divide-by-zero-testing" title="Permalink to this headline">#</a></h3>
<p>Launch your calculator and then attempt to divide by zero.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="08_tutorial_6.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Tutorial 6 - Create Calculator App</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Damien Murtagh
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/DamoM73/PyQt-website" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
            </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial 7 - Refine Calculator App</a><ul>
<li><a class="reference internal" href="#equals-button">Equals button</a><ul>
<li><a class="reference internal" href="#equals-signals-and-slots">Equals signals and slots</a></li>
<li><a class="reference internal" href="#testing-equals">Testing Equals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#after-clicking-equals">After Clicking Equals</a><ul>
<li><a class="reference internal" href="#create-flag-variable">Create Flag Variable</a></li>
<li><a class="reference internal" href="#set-flag-variable">Set Flag Variable</a></li>
<li><a class="reference internal" href="#use-flag-variable">Use Flag Variable</a></li>
<li><a class="reference internal" href="#testing-flag">Testing Flag</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multiple-operators">Multiple Operators</a><ul>
<li><a class="reference internal" href="#multiple-operators-planning">Multiple Operators Planning</a></li>
<li><a class="reference internal" href="#multiple-operators-code">Multiple Operators Code</a></li>
<li><a class="reference internal" href="#test-multiple-operators">Test Multiple Operators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operator-first">Operator First</a><ul>
<li><a class="reference internal" href="#operator-first-planning">Operator First Planning</a></li>
<li><a class="reference internal" href="#operator-first-code">Operator First Code</a></li>
<li><a class="reference internal" href="#test-operator-first">Test Operator First</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prevent-blank-display">Prevent Blank Display</a></li>
<li><a class="reference internal" href="#double-decimal">Double Decimal</a><ul>
<li><a class="reference internal" href="#double-decimal-planning">Double Decimal Planning</a></li>
<li><a class="reference internal" href="#double-decimal-testing">Double Decimal Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#leading-zeroes">Leading Zeroes</a><ul>
<li><a class="reference internal" href="#leading-zeroes-planning">Leading Zeroes Planning</a></li>
<li><a class="reference internal" href="#leading-zeroes-code">Leading Zeroes Code</a></li>
<li><a class="reference internal" href="#leading-zeroes-testing">Leading Zeroes Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#divide-by-zero">Divide by Zero</a><ul>
<li><a class="reference internal" href="#divide-by-zero-planning">Divide by Zero Planning</a></li>
<li><a class="reference internal" href="#divide-by-zero-code">Divide by Zero Code</a></li>
<li><a class="reference internal" href="#divide-by-zero-testing">Divide by Zero Testing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    </body>
</html>